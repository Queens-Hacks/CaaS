{% extends 'base.html' %}

{% block content %}

  {% if not hide_message %}
    <div class="message welcome">
      <a class="dismiss small button" href="{{ url_for('dismiss_welcome') }}" title="dismiss">&times;</a>
      <h2>Hello, {{ current_user.name or current_user.username }}</h2>
      <p>Welcome to Precomp! It would be really awesome if this message said something useful, but for some reason I'm the one writing it right now. And it's 4am. So instead, you get this useless copy. Hope you're happy.</p>
    </div>
  {% endif %}

  <form class="power">
    <h3><label for="newstate">Power</label></h3>
    <input
      class="visuallyhidden focusable"
      type="checkbox"
      id="newstate"
      name="newstate"
      {% if current_usercompiler_state == 'on' %}
        checked="checked"
      {% endif %} />
    <a
      href="{{ url_for('toggle_compiler_state') }}"
      class="power-widget-container state-{{ current_user.compiler_state }}">
      <div class="power-widget button">{{ current_user.compiler_state }}</div>
    </a>
    <button class="visuallyhidden focusable" type="submit">Set Power</button>
  </form>

  <div class="key-blah">
    <h3>Key</h3>
    <div class="key-container">
      <code>{{ current_user.key }}</code>
    </div>
  </div>


  <div class="quickstart">
    <h2>Quickstart:</h2>
    <form>
      <p class="i-want-to">
        I want to compile
        <select class="button">
          {% for processor in processors %}
            <option value="{{ processor }}">{{ processor }}</option>
          {% endfor %}
        </select>
      </p>
    </form>
  </div>

  <div class="usecase">
    <div class="tabs">
      <a href="#curl" class="button selected">Compile with <code>curl</code></a>
      <a href="#client" class="button">Autopilot with our autoclient</a>
    </div>

    <div class="use selected curl">
      <pre>
curl whateever tar | http://<em class="processor">{{ processors[0] }}</em>.precomp.ca/?key=<em class="key">{{ current_user.key }}</em> | tar zx whatever
</pre>
    </div>

    <div class="use autopilot">
      <pre>
config:
  in: yaml
  woo: awesome
  processor: <em class="processor">{{ processors[0] }}</em>
  key: <em class="key">{{ current_user.key }}</em>
</pre>
    </div>
  </div>

{% endblock %}
